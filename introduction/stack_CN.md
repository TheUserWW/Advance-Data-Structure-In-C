# 栈数据结构文档

## 概述
本头文件采用链表实现方式提供了完整的栈数据结构实现，包含所有基础栈操作及附加工具函数。

**文件:** `stack.h`  
**作者:** [您的姓名]  
**日期:** [当前日期]  
**版本:** 1.0

## 数据结构

### 栈节点(StackNode)
```c
typedef struct StackNode {
    int data;               ///< 节点存储的数据
    struct StackNode* next; ///< 指向下一节点的指针
} StackNode;
```
- **作用:** 表示栈中的单个元素
- **内存:** 每个节点占用`sizeof(int) + sizeof(指针)`字节

### 栈结构(Stack)
```c
typedef struct {
    StackNode* top;  ///< 指向栈顶节点的指针
    int size;        ///< 当前栈元素数量
} Stack;
```
- **作用:** 栈的主容器，保存元数据
- **内存:** 固定大小`sizeof(指针) + sizeof(int)`

## API参考

### 基础操作

#### `stack_create()`
```c
Stack* stack_create();
```
- **描述:** 初始化一个新的空栈
- **时间复杂度:** O(1)
- **空间复杂度:** O(1)
- **返回值:** 新创建的栈指针
- **注意:** 调用者必须使用`stack_free()`释放内存

#### `stack_push()`
```c
void stack_push(Stack* s, int item);
```
- **描述:** 将元素压入栈顶
- **时间复杂度:** O(1)
- **空间复杂度:** 每次操作O(1)(均摊)
- **参数:**
  - `s`: 栈指针
  - `item`: 要压入的整数值
- **错误处理:** 内存分配失败时终止程序

#### `stack_pop()`
```c
int stack_pop(Stack* s);
```
- **描述:** 移除并返回栈顶元素
- **时间复杂度:** O(1)
- **空间复杂度:** O(1)
- **返回值:** 弹出的整数值
- **错误处理:** 空栈时终止程序
- **警告:** 生产代码中应先检查`stack_isEmpty()`

### 访问方法

#### `stack_top()`
```c
int stack_top(Stack* s);
```
- **描述:** 返回栈顶元素但不移除
- **时间复杂度:** O(1)
- **空间复杂度:** O(1)
- **返回值:** 栈顶整数值
- **错误处理:** 空栈时终止程序

#### `stack_size()`
```c
int stack_size(Stack* s);
```
- **描述:** 返回当前元素数量
- **时间复杂度:** O(1)
- **空间复杂度:** O(1)
- **返回值:** 当前栈大小

#### `stack_isEmpty()`
```c
bool stack_isEmpty(Stack* s);
```
- **描述:** 检查栈是否为空
- **时间复杂度:** O(1)
- **空间复杂度:** O(1)
- **返回值:** 表示是否为空栈的布尔值

### 高级操作

#### `stack_swap()`
```c
void stack_swap(Stack* s1, Stack* s2);
```
- **描述:** 高效交换两个栈的内容
- **时间复杂度:** O(1)
- **空间复杂度:** O(1)
- **参数:** 需要交换的两个栈指针
- **注意:** 仅交换指针/大小元数据

### 内存管理

#### `stack_free()`
```c
void stack_free(Stack* s);
```
- **描述:** 释放栈占用的所有内存
- **时间复杂度:** O(n) n为栈大小
- **空间复杂度:** O(1)
- **参数:** 要释放的栈指针
- **后置条件:** 栈指针将失效

## 复杂度总结

| 操作         | 时间复杂度 | 空间复杂度 |
|--------------|------------|------------|
| 创建         | O(1)       | O(1)       |
| 压栈         | O(1)       | 每次操作O(1)|
| 弹栈         | O(1)       | O(1)       |
| 查看栈顶     | O(1)       | O(1)       |
| 获取大小     | O(1)       | O(1)       |
| 判空         | O(1)       | O(1)       |
| 交换         | O(1)       | O(1)       |
| 释放         | O(n)       | O(1)       |

## 内存使用
- **每个栈:** 固定开销(指针+整型)
- **每个元素:** sizeof(StackNode) = sizeof(int) + sizeof(指针)
- **总内存:** ~(n * (sizeof(int) + sizeof(指针)) + 常数

## 最佳实践
1. 执行`pop()`或`top()`前务必检查`stack_isEmpty()`
2. 每个`stack_create()`必须对应一个`stack_free()`
3. 可能情况下优先使用`stack_swap()`而非手动转移元素
4. 在时间关键代码段，优先使用`stack_size()`而非重复`stack_isEmpty()`检查

## 限制
1. 非线程安全(并发访问需要外部同步)
2. 固定使用`int`数据类型(可修改为其他类型)
3. 错误处理会终止程序(库使用时可能需要修改)

## 使用示例
完整操作演示请参见头文件注释中的示例。
